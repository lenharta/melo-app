import { useEffect, useState } from "react";
import { Loader, Nav, Playlist, ProgressBar, ThemeToggle } from "./components";
import { isHome, loaderTimeout } from "./utils";
import { GlobalStyle } from "./styles";
import styled, { ThemeProvider } from "styled-components";
import { lightTheme, darkTheme } from "./styles/theme";
import { Routes, Route } from "react-router-dom";
import { Charts, Dashboard } from "./routes";
import { useDarkMode } from "./utils/hooks/useDarkTheme";

const App = () => {
  const [loading, setLoading] = useState(false);
  const [theme, toggleTheme] = useDarkMode();

  useEffect(() => {
    setLoading(true);
    setTimeout(() => {
      setLoading(false);
    }, loaderTimeout);
  }, []);

  return (
    <>
      <ThemeProvider theme={theme === "dark" ? darkTheme : lightTheme}>
        <GlobalStyle />
        <ThemeToggle theme={theme} toggleTheme={toggleTheme} />
        {loading && isHome ? (
          <Loader />
        ) : (
          <>
            <Nav />
            <ProgressBar />
            <StyledMain>
              <Routes>
                <Route path="/" element={<Dashboard />} />
                <Route path="charts" element={<Charts />} />
                {/* Construction page */}
                <Route path="playlist" element={<Playlist />} />
              </Routes>
            </StyledMain>
          </>
        )}
      </ThemeProvider>
    </>
  );
};

const StyledMain = styled.main`
  max-width: 1600px;
`;

export default App;



// <svg width="100%" height="100%" id="svg" viewBox="0 0 1440 700" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150"><path d="M 0,700 C 0,700 0,175 0,175 C 30.83268669904855,133.29686268746048 61.6653733980971,91.59372537492098 109,109 C 156.3346266019029,126.40627462507902 220.1711931066601,202.92196118777656 273,222 C 325.8288068933399,241.07803881222344 367.64985417526236,202.71842987397272 409,172 C 450.35014582473764,141.28157012602728 491.22939019229034,118.20431931633254 531,140 C 570.7706098077097,161.79568068366746 609.4325850555763,228.4642928606971 656,231 C 702.5674149444237,233.5357071393029 757.0402695854044,171.93850924087909 802,170 C 846.9597304145956,168.06149075912091 882.4063366028062,225.78167017578653 926,228 C 969.5936633971938,230.21832982421347 1021.3343840033715,176.93481005597474 1057,153 C 1092.6656159966285,129.06518994402526 1112.2561273837077,134.4790896003145 1156,158 C 1199.7438726162923,181.5209103996855 1267.641106461798,223.14883154276728 1319,229 C 1370.358893538202,234.85116845723272 1405.179446769101,204.92558422861634 1440,175 C 1440,175 1440,700 1440,700 Z" stroke="none" stroke-width="0" fill="#ef635166" class="transition-all duration-300 ease-in-out delay-150 path-0"></path><path d="M 0,700 C 0,700 0,350 0,350 C 46.707342944012865,324.27741584752766 93.41468588802573,298.5548316950554 130,285 C 166.58531411197427,271.4451683049446 193.04859939191,270.05808906730607 237,288 C 280.95140060809,305.94191093269393 342.3909165443344,343.2128120357204 395,372 C 447.6090834556656,400.7871879642796 491.3877344307524,421.09066278981226 537,401 C 582.6122655692476,380.90933721018774 630.0581457326564,320.4245368050305 674,292 C 717.9418542673436,263.5754631949695 758.3796826386221,267.21118999006586 799,288 C 839.6203173613779,308.78881000993414 880.4231237128555,346.7307032347061 928,348 C 975.5768762871445,349.2692967652939 1029.9278225099563,313.86599707110975 1064,314 C 1098.0721774900437,314.13400292889025 1111.8655862473195,349.80530848085505 1157,348 C 1202.1344137526805,346.19469151914495 1278.6098325007658,306.91276900546995 1331,301 C 1383.3901674992342,295.08723099453005 1411.695083749617,322.543615497265 1440,350 C 1440,350 1440,700 1440,700 Z" stroke="none" stroke-width="0" fill="#ef635188" class="transition-all duration-300 ease-in-out delay-150 path-1"></path><path d="M 0,700 C 0,700 0,525 0,525 C 42.874665098925306,536.7013133965743 85.74933019785061,548.4026267931484 133,562 C 180.2506698021494,575.5973732068516 231.8773443075229,591.0908062239804 274,580 C 316.1226556924771,568.9091937760196 348.7412925720579,531.23414831093 386,529 C 423.2587074279421,526.76585168907 465.15748540424534,559.9726005323001 511,567 C 556.8425145957547,574.0273994676999 606.6287658109609,554.8754495598696 657,538 C 707.3712341890391,521.1245504401304 758.3274513519112,506.52560122822155 802,490 C 845.6725486480888,473.47439877177845 882.0614287813938,455.02214552724445 919,462 C 955.9385712186062,468.97785447275555 993.4268335225131,501.3858166628005 1037,526 C 1080.573166477487,550.6141833371995 1130.231237128554,567.4345878215537 1173,561 C 1215.768762871446,554.5654121784463 1251.64821796327,524.8758320509846 1295,515 C 1338.35178203673,505.1241679490153 1389.1758910183648,515.0620839745077 1440,525 C 1440,525 1440,700 1440,700 Z" stroke="none" stroke-width="0" fill="#ef6351ff" class="transition-all duration-300 ease-in-out delay-150 path-2"></path></svg>
